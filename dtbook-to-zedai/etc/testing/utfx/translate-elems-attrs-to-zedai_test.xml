<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="utfx_tests.rnc" type="compact"?>
<utfx:tests xmlns:utfx="http://utfx.org/test-definition"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://www.daisy.org/z3986/2005/dtbook/"
    xmlns:rend="http://www.daisy.org/ns/z3998/authoring/features/rend/"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:tmp="http://www.daisy.org/ns/pipeline/tmp">

    <utfx:stylesheet src="../../src/main/resources/xml/translate-elems-attrs-to-zedai.xsl"/>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: DTBook</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <dtbook/>
            </utfx:source>
            <utfx:expected>
                <document xml:lang="en"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Book</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <book/>
            </utfx:source>
            <utfx:expected>
                <body><frontmatter><section><h role="title"></h></section></frontmatter></body>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Bodymatter</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <bodymatter/>
            </utfx:source>
            <utfx:expected>
                <bodymatter/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Rearmatter</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <rearmatter/>
            </utfx:source>
            <utfx:expected>
                <backmatter/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Docauthor</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <docauthor/>
            </utfx:source>
            <utfx:expected>
                <p role="author"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Doctitle</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <doctitle/>
            </utfx:source>
            <utfx:expected>
                <p role="title"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <!--FIXME UTFX does not support generated IDs-->
    <!--<utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Doctitle in frontmatter</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <frontmatter>
                    <doctitle/>
                </frontmatter>
            </utfx:source>
            <utfx:expected>
                <frontmatter>
                    <section>
                        <h role="title"/>
                    </section>
                </frontmatter>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>-->

    
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Headings</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <h1/>
                <h2/>
                <h3/>
                <h4/>
                <h5/>
                <h6/>
            </utfx:source>
            <utfx:expected>
                <h/>
                <h/>
                <h/>
                <h/>
                <h/>
                <h/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Text</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>Text</utfx:source>
            <utfx:expected>Text</utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: bridgehead and hd</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <bridgehead/>
                <hd/>
            </utfx:source>
            <utfx:expected>
                <hd/>
                <hd/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: emphasis</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <em>EMphasis</em>
                <strong>STRONG</strong>
            </utfx:source>
            <utfx:expected>
                <emph>EMphasis</emph>
                <emph>STRONG</emph>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>


    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #1</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list start="0" depth="2"/>
            </utfx:source>
            <utfx:expected>
                <list start="0" depth="2"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #2</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list enum="1"/>
            </utfx:source>
            <utfx:expected>
                <list rend:prefix="decimal"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #3</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list enum="a"/>
                <list enum="a" start="b"/>
            </utfx:source>
            <utfx:expected>
                <list rend:prefix="lower-alpha"/>
                <list rend:prefix="lower-alpha" start="2"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #4</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list enum="A"/>
                <list enum="A" start="B"/>
            </utfx:source>
            <utfx:expected>
                <list rend:prefix="upper-alpha"/>
                <list rend:prefix="upper-alpha" start="2"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #5</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list enum="i"/>
                <list enum="i" start="ii"/>
            </utfx:source>
            <utfx:expected>
                <list rend:prefix="lower-roman"/>
                <list rend:prefix="lower-roman" start="2"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #6</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list enum="I"/>
                <list enum="I" start="II"/>
            </utfx:source>
            <utfx:expected>
                <list rend:prefix="upper-roman"/>
                <list rend:prefix="upper-roman" start="2"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #7</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list type="pl"/>
            </utfx:source>
            <utfx:expected>
                <list/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #8</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list type="ul"/>
            </utfx:source>
            <utfx:expected>
                <list type="unordered"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #9</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list type="ul"/>
            </utfx:source>
            <utfx:expected>
                <list type="unordered"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #10</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list>
                    <li>Item 1</li>
                    <li>Item 2</li>
                    <pagenum page="normal">12</pagenum>
                </list>
            </utfx:source>
            <utfx:expected>
                <list>
                    <item>Item 1</item>
                    <item>Item 2</item>
                    <pagebreak value="12"/>
                </list>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: List #11</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <list>
                    <hd>The List</hd>
                    <li>Item 1</li>
                    <li>Item 2</li>
                </list>
            </utfx:source>
            <utfx:expected>
                <list>
                    <item>
                        <hd>The List</hd>
                    </item>
                    <item>Item 1</item>
                    <item>Item 2</item>
                </list>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Image</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <img src="image.png" height="300" width="300" alt="test image" id="abcde"/>
            </utfx:source>
            <utfx:expected>
                <object src="image.png" tmp:height="300" tmp:width="300" xml:id="abcde">
                    <description ref="abcde">test image</description>
                </object>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Image Group</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <imggroup/>
            </utfx:source>
            <utfx:expected>
                <block/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Caption 1</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <caption imgref="#img0001">CAPTION</caption>
            </utfx:source>
            <utfx:expected>
                <caption ref="img0001">CAPTION</caption>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Caption 2</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <caption>Mixed <span>Text</span> Model</caption>
            </utfx:source>
            <utfx:expected>
                <caption>Mixed <span>Text</span> Model</caption>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Image group with caption</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <imggroup>
                    <img src="image.png" alt="test image" id="img0001"/>
                    <caption>CAPTION</caption>
                </imggroup>
                <imggroup>
                    <img src="image.png" alt="test image" id="img0002"/>
                    <caption imgref="img0002">CAPTION</caption>
                </imggroup>
            </utfx:source>
            <utfx:expected>
                <block role="figure">
                    <object src="image.png" xml:id="img0001">
                        <description ref="img0001">test image</description>
                    </object>
                    <caption ref="img0001">CAPTION</caption>
                </block>
                <block role="figure">
                    <object src="image.png" xml:id="img0002">
                        <description ref="img0002">test image</description>
                    </object>
                    <caption ref="img0002">CAPTION</caption>
                </block>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Annotation</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><tmp:annotation-block/><tmp:annotation-phrase/></utfx:source>
            <utfx:expected><annotation/><annotation/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Prodnote</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <prodnote imgref="#img0001">PRODNOTE</prodnote>
            </utfx:source>
            <utfx:expected>
                <annotation by="republisher" ref="img0001">PRODNOTE</annotation>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Prodnote #2</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <prodnote id="pn1">PRODNOTE</prodnote>
            </utfx:source>
            <utfx:expected>
                <annotation xml:id="pn1" by="republisher">PRODNOTE</annotation>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Image group with prodnote</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <imggroup>
                    <img src="image.png" alt="test image" id="img0002"/>
                    <prodnote>PRODNOTE</prodnote>
                </imggroup>
            </utfx:source>
            <utfx:expected>
                <block>
                    <object src="image.png" xml:id="img0002">
                        <description ref="img0002">test image</description>
                    </object>
                    <annotation by="republisher" ref="img0002">PRODNOTE</annotation>
                </block>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Sidebar</utfx:name>
        <utfx:assert-equal>
            <utfx:source>
                <sidebar/>
            </utfx:source>
            <utfx:expected>
                <aside role="sidebar"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Note </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <note class="footnote"/>
                <note class="endnote"/>
            </utfx:source>
            <utfx:expected>
                <note class="footnote" role="footnote"/>
                <note class="endnote" role="endnote"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Div</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <div/>
            </utfx:source>
            <utfx:expected>
                <block/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: pagenum </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <pagenum>5</pagenum>
                <pagenum page="front">ii</pagenum>
            </utfx:source>
            <utfx:expected>
                <pagebreak value="5"/>
                <pagebreak value="ii"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <!--FIXME UTFX does not support XSLT keys-->
    <!--<utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Noteref</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <note id="note"/>
                <noteref idref="#note">32</noteref>
            </utfx:source>
            <utfx:expected>
                <note xml:id="note"/>
                <noteref ref="note">32</noteref>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>-->
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Noteref Invalid</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <noteref idref="#note">32</noteref>
            </utfx:source>
            <utfx:expected>
                <!--FIXME Noteref '32' to missing ID '#note'-->
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <!--FIXME UTFX does not support XSLT keys-->
    <!--<utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Annoref</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tmp:annotation-block id="anno"/>
                <annoref idref="#anno">33</annoref>
            </utfx:source>
            <utfx:expected>
                <annotation xml:id="anno"/>
                <annoref ref="anno">33</annoref>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>-->
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Annoref Invalid</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <annoref idref="#anno">33</annoref>
            </utfx:source>
            <utfx:expected>
                <!--FIXME Annoref '33' to missing ID '#anno'-->
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Autho </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <author id="author">name</author>
            </utfx:source>
            <utfx:expected>
                <citation xml:id="author"><name property="author" about="author">name</name></citation>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Quotes </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <blockquote cite="#the-ref"/>
                <q cite="http://example.org/page#ref"/>
            </utfx:source>
            <utfx:expected>
                <quote ref="the-ref"/>
                <quote xlink:href="http://example.org/page#ref"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Quotes 2</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <blockquote id="quote">
                    <p>text</p> 
                    <author>author</author>
                </blockquote>
            </utfx:source>
            <utfx:expected>
                <quote xml:id="quote">
                    <p>text</p> 
                    <citation about="#quote"><name property="author">author</name></citation>
                </quote>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Quotes 3</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <blockquote id="quote">
                    <p>text</p> 
                    <title>title</title>
                </blockquote>
            </utfx:source>
            <utfx:expected>
                <quote xml:id="quote">
                    <p>text</p> 
                    <citation about="#quote"><span property="title">title</span></citation>
                </quote>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Quotes 4</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <blockquote id="quote">
                    <p>text</p> 
                    <title>title</title>
                    <author>author</author>
                </blockquote>
            </utfx:source>
            <utfx:expected>
                <quote xml:id="quote">
                    <p>text</p> 
                    <citation about="#quote"><span property="title">title</span><name property="author">author</name></citation>
                </quote>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Quotes 3</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <q id="quote">text <cite><author>author</author></cite></q>
            </utfx:source>
            <utfx:expected>
                <quote xml:id="quote">
                    text
                    <citation><name property="author" about="#quote">author</name></citation>
                </quote>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 1</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table1" width="100" border="2" cellspacing="10" cellpadding="10"/>
            </utfx:source>
            <utfx:expected>
                <table xml:id="table1" tmp:width="100" tmp:border="2" tmp:cellspacing="10" tmp:cellpadding="10"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 2</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table2">
                    <caption>This is a lovely <span>Caption!</span></caption>
                </table>
            </utfx:source>
            <utfx:expected>
                <caption ref="table2">This is a lovely <span>Caption!</span></caption>
                <table xml:id="table2"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 3</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table3">
                    <col id="col1"/>
                    <col id="col2"/>
                    <tbody id="tbody1"/>
                </table>
            </utfx:source>
            <utfx:expected>
                <table xml:id="table3">
                    <colgroup><col xml:id="col1"/><col xml:id="col2"/></colgroup>
                    <tbody xml:id="tbody1"/>
                </table>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <!-- FIXME UTFX does not support generared IDs -->
    <!--<utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 4</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table4" summary="the summary"/>
            </utfx:source>
            <utfx:expected>
                <description xml:id="generated">the summary</description>
                <table xml:id="table4" desc="generated"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>-->
    
    <!-- FIXME UTFX does not support generared IDs -->
    <!--<utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 5</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table5" summary="the summary">
                    <caption>This is a lovely <span>Caption!</span></caption>
                </table>
            </utfx:source>
            <utfx:expected>
                <caption ref="table5">This is a lovely <span>Caption!</span></caption>
                <description xml:id="generated">the summary</description>
                <table xml:id="table5" desc="generated"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>-->
    
    <utfx:test>
        <!--tests that tbody is not created when not necessary-->
        <utfx:name>Translate-DTBook2ZedAI: Table 6</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table6">
                    <tr id="tr1"><td id="td11">-</td><td id="td12">-</td></tr>
                    <pagenum>1</pagenum>
                    <tr id="tr2"><td id="td21">-</td><td id="td22">-</td></tr>
                </table>
            </utfx:source>
            <utfx:expected>
                <table xml:id="table6">
                    <tr xml:id="tr1"><td xml:id="td11">-</td><td xml:id="td12">-</td></tr>
                    <pagebreak value="1"/>
                    <tr xml:id="tr2"><td xml:id="td21">-</td><td xml:id="td22">-</td></tr>
                </table>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 7</utfx:name>
        <!--tests that tbody is added when thead is present--> 
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table7">
                    <thead id="thead">
                        <tr id="tr0"><th id="th1">Col 1</th><th id="th2">Col 2</th></tr>
                    </thead>
                    <tr id="tr1"><td id="td11">-</td><td id="td12">-</td></tr>
                    <pagenum>1</pagenum>
                    <tr id="tr2"><td id="td21">-</td><td id="td22">-</td></tr>
                </table>
            </utfx:source>
            <utfx:expected>
                <table xml:id="table7">
                    <thead xml:id="thead">
                        <tr xml:id="tr0"><th xml:id="th1">Col 1</th><th xml:id="th2">Col 2</th></tr>
                    </thead>
                    <tbody>
                        <tr xml:id="tr1"><td xml:id="td11">-</td><td xml:id="td12">-</td></tr>
                        <pagebreak value="1"/>
                        <tr xml:id="tr2"><td xml:id="td21">-</td><td xml:id="td22">-</td></tr>
                    </tbody>
                </table>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 8</utfx:name>
        <!--tests that tbody is added when tfoot is present--> 
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table8">
                    <tfoot id="tfoot">
                        <tr id="tr0"><th id="th1">Col 1</th><th id="th2">Col 2</th></tr>
                    </tfoot>
                    <tr id="tr1"><td id="td11">-</td><td id="td12">-</td></tr>
                    <pagenum>1</pagenum>
                    <tr id="tr2"><td id="td21">-</td><td id="td22">-</td></tr>
                </table>
            </utfx:source>
            <utfx:expected>
                <table xml:id="table8">
                    <tbody>
                        <tr xml:id="tr1"><td xml:id="td11">-</td><td xml:id="td12">-</td></tr>
                        <pagebreak value="1"/>
                        <tr xml:id="tr2"><td xml:id="td21">-</td><td xml:id="td22">-</td></tr>
                    </tbody>
                    <tfoot xml:id="tfoot">
                        <tr xml:id="tr0"><th xml:id="th1">Col 1</th><th xml:id="th2">Col 2</th></tr>
                    </tfoot>
                </table>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: Table 9</utfx:name>
        <!--tests that tfoot,tbody are reordered as tbody,tfoot--> 
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <table id="table9">
                    <tfoot id="tfoot">
                        <tr id="tr0"><th id="th1">Col 1</th><th id="th2">Col 2</th></tr>
                    </tfoot>
                    <tbody id="tbody">
                        <tr id="tr1"><td id="td11">-</td><td id="td12">-</td></tr>
                        <pagenum>1</pagenum>
                        <tr id="tr2"><td id="td21">-</td><td id="td22">-</td></tr>
                    </tbody>
                </table>
            </utfx:source>
            <utfx:expected>
                <table xml:id="table9">
                    <tbody xml:id="tbody">
                        <tr xml:id="tr1"><td xml:id="td11">-</td><td xml:id="td12">-</td></tr>
                        <pagebreak value="1"/>
                        <tr xml:id="tr2"><td xml:id="td21">-</td><td xml:id="td22">-</td></tr>
                    </tbody>
                    <tfoot xml:id="tfoot">
                        <tr xml:id="tr0"><th xml:id="th1">Col 1</th><th xml:id="th2">Col 2</th></tr>
                    </tfoot>
                </table>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: col</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <col span="3" align="left" valign="center" width="300" id="col1"/>
            </utfx:source>
            <utfx:expected>
                <col span="3" tmp:align="left" tmp:valign="center" tmp:width="300" xml:id="col1"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: colgroup</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <colgroup span="3" id="colgroup1" align="left" valign="center" width="300"/>
                <colgroup span="4" id="colgroup2">
                    <col id="col1"/>
                    <col id="col2"/>
                </colgroup>
                <colgroup id="colgroup3">
                    <col id="col3"/>
                    <col id="col4"/>
                </colgroup>
            </utfx:source>
            <utfx:expected>
                <colgroup xml:id="colgroup1" span="3" tmp:align="left" tmp:valign="center" tmp:width="300"/>
                <colgroup xml:id="colgroup2">
                    <col xml:id="col1"/>
                    <col xml:id="col2"/>
                </colgroup>
                <colgroup xml:id="colgroup3">
                    <col xml:id="col3"/>
                    <col xml:id="col4"/>
                </colgroup>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: thead </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <thead id="thead1" align="left" valign="center"/>
            </utfx:source>
            <utfx:expected>
                <thead xml:id="thead1" tmp:align="left" tmp:valign="center"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: tfoot</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tfoot id="tfoot1" align="left" valign="center"/>
            </utfx:source>
            <utfx:expected>
                <tfoot xml:id="tfoot1" tmp:align="left" tmp:valign="center"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: tbody</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tbody id="tbody2" align="left" valign="center"/>
            </utfx:source>
            <utfx:expected>
                <tbody xml:id="tbody2" tmp:align="left" tmp:valign="center"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: tr </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tr id="tr1" align="left" valign="center"/>
            </utfx:source>
            <utfx:expected>
                <tr xml:id="tr1" tmp:align="left" tmp:valign="center"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: th</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <th id="th1" abbr="abc" headers="def" colspan="3" rowspan="3" scope="scope"
                    align="right" valign="center"/>
            </utfx:source>
            <utfx:expected>
                <th xml:id="th1" abbr="abc" headers="def" colspan="3" rowspan="3" scope="scope"
                    tmp:align="right" tmp:valign="center"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: td</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <td id="td1" headers="abc" colspan="3" rowspan="4" scope="scope" align="center"
                    valign="center"/>
            </utfx:source>
            <utfx:expected>
                <td xml:id="td1" headers="abc" colspan="3" rowspan="4" scope="scope" tmp:align="center"
                    tmp:valign="center"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: byline</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <byline/>
            </utfx:source>
            <utfx:expected>
                <citation/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: sent</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <sent/>
            </utfx:source>
            <utfx:expected>
                <s/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: address</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <address/>
            </utfx:source>
            <utfx:expected>
                <address/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: epigraph</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <epigraph/>
            </utfx:source>
            <utfx:expected>
                <block role="epigraph"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: dateline </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <dateline/>
            </utfx:source>
            <utfx:expected>
                <p role="time"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>


    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI:ln </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tmp:ln/>
            </utfx:source>
            <utfx:expected>
                <ln/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>


    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: br </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><br/></utfx:source>
            <utfx:expected/>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: cite </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <cite id="cite1"> Text1 <title>Title</title>
                    <author>Author</author> Text2 </cite>
            </utfx:source>
            <utfx:expected>
                <citation xml:id="cite1"> Text1 <span property="title" about="#cite1">Title</span>
                    <name property="author" about="#cite1">Author</name> Text2 </citation>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>


    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: covertitle </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <covertitle/>
            </utfx:source>
            <utfx:expected>
                <block role="covertitle"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: acronym</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <acronym pronounce="yes">FALAFL</acronym>
                <acronym pronounce="no">ZPQA</acronym>
                <acronym>DMFC</acronym>
            </utfx:source>
            <utfx:expected>
                <abbr role="acronym">FALAFL</abbr>
                <abbr role="initialism">ZPQA</abbr>
                <abbr role="initialism">DMFC</abbr>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: link</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <link/>
            </utfx:source>
            <utfx:expected/>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: p</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><p/></utfx:source>
            <utfx:expected><p/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: abbr</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><abbr/></utfx:source>
            <utfx:expected><abbr role="truncation"/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: sup</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><sup/></utfx:source>
            <utfx:expected><sup/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: sub</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><sub/></utfx:source>
            <utfx:expected><sub/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: span</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <span/>
                <span role="ROLE"/>
            </utfx:source>
            <utfx:expected>
                <span/>
                <span role="ROLE"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: w</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <w/>
            </utfx:source>
            <utfx:expected>
                <w/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: line</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><line/></utfx:source>
            <utfx:expected><ln/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: samp </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <samp/>
            </utfx:source>
            <utfx:expected>
                <block role="example"/>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: dfn </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><dfn/></utfx:source>
            <utfx:expected><term/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: a</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <a href="#abc"/>
                <a href="page.html" external="true"/>
                <a href="#def" external="false"/>
                <a href="#para3" rel="REL"/>
                <a href="#chapter4" rev="REV"/>
            </utfx:source>
            <utfx:expected>
                <ref ref="abc"/>
                <ref xlink:href="page.html"/>
                <ref ref="def"/>
                <ref ref="para3" rel="REL"/>
                <ref ref="chapter4" rev="REV"/>
            </utfx:expected>

        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: definition list </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><dl/></utfx:source>
            <utfx:expected><list type="unordered"/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: item </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><tmp:item/></utfx:source>
            <utfx:expected><item/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: linenum</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source><linenum/></utfx:source>
            <utfx:expected><lnum/></utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: poem 1</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <poem id="poem">
                    <title>TITLE</title>
                    <author>AUTHOR</author>
                    <hd>HD</hd>
                    <line>LINE</line>
                </poem>
            </utfx:source>
            <utfx:expected>
                <block role="poem" xml:id="poem">
                    <p property="title" about="#poem">TITLE</p>
                    <p><name  property="author" about="#poem">AUTHOR</name></p>
                    <hd>HD</hd>
                    <p><ln>LINE</ln></p>
                </block>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: poem 2</utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <poem id="poem">
                    <title>TITLE</title>
                    <author>AUTHOR</author>
                    <hd>HD A</hd>
                    <line>LINE 1</line>
                    <line>LINE 2</line>
                    <hd>HD B</hd>
                    <line>LINE 3</line>
                    <line>LINE 4</line>
                </poem>
            </utfx:source>
            <utfx:expected>
                <block role="poem" xml:id="poem">
                    <p property="title" about="#poem">TITLE</p>
                    <p><name property="author" about="#poem">AUTHOR</name></p>
                    <hd>HD A</hd>
                    <p>
                        <ln>LINE 1</ln>
                        <ln>LINE 2</ln>
                    </p>
                    <hd>HD B</hd>
                    <p>
                        <ln>LINE 3</ln>
                        <ln>LINE 4</ln>
                    </p>
                </block>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: code-blocks </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tmp:code-block/>
                <tmp:code-block>
                    <em/>
                    <strong/>
                    <dfn/>
                    <cite id="cite1"/>
                    <abbr/>
                    <acronym/>
                    <a href="abc.html" external="true"/>
                    <sub/>
                    <sup/>
                    <span/>
                    <w/>
                    <sent/>
                </tmp:code-block>
                <tmp:code-block>
                    <prodnote/><q/>
                </tmp:code-block>
                <tmp:code-block>
                    <em/><pagenum>23</pagenum>
                </tmp:code-block>
                <tmp:code-block>
                    <line>LINE</line><q/>
                </tmp:code-block>
            </utfx:source>
            <utfx:expected>
                <code/>
                <code>
                    <p>
                        <emph/><emph/><term/><citation xml:id="cite1"/>
                        <abbr role="truncation"/><abbr role="initialism"/>
                        <ref xlink:href="abc.html"/><sub/><sup/><span/><w/>
                        <s/></p>
                </code>
                <code>
                    <block><annotation by="republisher"/></block><block><quote/></block>
                </code>
                <code>
                    <p><emph/></p><pagebreak value="23"/>
                </code>
                <code>
                    <ln>LINE</ln><block><quote/></block>
                </code>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>

    <utfx:test>
        <utfx:name>Translate-DTBook2ZedAI: code-phrases </utfx:name>
        <utfx:assert-equal normalise-internal-whitespace="yes">
            <utfx:source>
                <tmp:code-phrase/>
                <tmp:code-phrase>
                    <abbr/>
                    <acronym/>
                    <em/>
                    <strong/>
                </tmp:code-phrase>
                <tmp:code-phrase>
                    <span/><abbr/>
                </tmp:code-phrase>
            </utfx:source>
            <utfx:expected>
                <code/>
                <code>
                    <span role="truncation"/>
                    <span role="initialism"/>
                    <emph/>
                    <emph/>
                </code>
                <code>
                    <span/>
                    <span role="truncation"/>
                </code>
            </utfx:expected>
        </utfx:assert-equal>
    </utfx:test>
</utfx:tests>
